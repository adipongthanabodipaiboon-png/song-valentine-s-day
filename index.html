<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blue: My Forever</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Montserrat:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background: #fff5f9;
      color: #3d2e35;
      overflow-x: hidden;
    }
    .app-wrapper {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }
    /* ========== LUXURY PINK PALETTE ========== */
    :root {
      --luxury-pink: #f5b3d4;
      --soft-blush: #fce4ec;
      --deep-rose: #c2185b;
      --pearl-white: #fff9fc;
      --champagne-gold: #e8d4a0;
      --accent-glow: rgba(232, 212, 160, 0.4);
      --pink-glow: rgba(245, 179, 212, 0.3);
      --text-dark: #3d2e35;
    }
    /* ========== LOADING SCREEN ========== */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      animation: fadeOutLoading 0.8s ease forwards 3.5s;
    }
    @keyframes fadeOutLoading {
      to { opacity: 0; visibility: hidden; }
    }
    .loading-content {
      text-align: center;
      animation: fadeInUp 1.2s ease;
    }
    .loading-quote {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.3rem, 4vw, 2.2rem);
      font-weight: 400;
      color: #c2185b;
      line-height: 1.8;
      margin-bottom: 30px;
      letter-spacing: 0.5px;
    }
    .loading-name {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      background: linear-gradient(135deg, #f5b3d4 0%, #c2185b 50%, #f5b3d4 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 40px;
      letter-spacing: 1px;
      text-shadow: 0 0 30px rgba(245, 179, 212, 0.2);
    }
    .loading-dots {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 40px;
    }
    .dot {
      width: 3px;
      height: 3px;
      background: #f5b3d4;
      border-radius: 50%;
      animation: dotPulse 2s ease infinite;
    }
    .dot:nth-child(2) { animation-delay: 0.2s; }
    .dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes dotPulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* ========== CURSOR TRAIL ========== */
    .cursor-trail {
      position: fixed;
      width: 4px;
      height: 4px;
      background: #f5b3d4;
      border-radius: 50%;
      pointer-events: none;
      box-shadow: 0 0 12px rgba(245, 179, 212, 0.7);
      animation: trailFade 1s ease forwards;
      z-index: 9999;
    }
    @keyframes trailFade {
      to {
        opacity: 0;
        transform: scale(0);
      }
    }
    /* ========== PARTICLES ========== */
    .particle {
      position: fixed;
      pointer-events: none;
    }
    .pink-particle {
      width: 2px;
      height: 2px;
      background: #f5b3d4;
      border-radius: 50%;
      box-shadow: 0 0 8px rgba(245, 179, 212, 0.8);
      animation: particleFloat 8s ease infinite;
    }
    @keyframes particleFloat {
      0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0.3;
      }
      50% {
        transform: translateY(-40px) translateX(20px);
        opacity: 0.8;
      }
    }
    /* ========== GLASS MORPHISM ========== */
    .glass-panel {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(255, 255, 255, 0.75) 100%);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(245, 179, 212, 0.3);
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(245, 179, 212, 0.15),
                  inset 0 1px 20px rgba(255, 255, 255, 0.5);
    }
    /* ========== VIGNETTE EFFECT ========== */
    .vignette {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      box-shadow: inset 0 0 120px rgba(194, 24, 91, 0.08);
      z-index: 1;
    }
    /* ========== LOGIN PAGE ========== */
    #login-page {
      position: fixed;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      opacity: 1;
      transition: opacity 0.8s ease;
    }
    #login-page.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .login-container {
      text-align: center;
      animation: fadeInScale 1s ease;
    }
    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .envelope-3d {
      perspective: 1000px;
      height: 200px;
      margin: 0 auto 40px;
    }
    .envelope-object {
      width: 200px;
      height: 150px;
      margin: 0 auto;
      position: relative;
      transform-style: preserve-3d;
      animation: envelopeFloat 3s ease infinite;
    }
    @keyframes envelopeFloat {
      0%, 100% { transform: translateY(0) rotateX(5deg); }
      50% { transform: translateY(-15px) rotateX(-5deg); }
    }
    .envelope-base {
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #fff9fc, #fce4ec);
      border-radius: 4px;
      box-shadow: 0 20px 60px rgba(194, 24, 91, 0.15),
                  0 0 40px rgba(245, 179, 212, 0.25),
                  inset -1px -1px 10px rgba(194, 24, 91, 0.08);
      position: relative;
      overflow: hidden;
    }
    .envelope-flap {
      position: absolute;
      width: 100%;
      height: 50%;
      background: linear-gradient(135deg, #f5b3d4, #e895b8);
      transform-origin: top;
      transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 4px 15px rgba(194, 24, 91, 0.2);
    }
    .envelope-object.open .envelope-flap {
      transform: rotateX(160deg);
    }
    .envelope-glow {
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(245, 179, 212, 0.3) 0%, transparent 70%);
      opacity: 0;
      animation: glowPulse 1.5s ease infinite;
    }
    @keyframes glowPulse {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 0.5; }
    }
    .login-text {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: #c2185b;
      margin-bottom: 20px;
      letter-spacing: 1px;
      text-shadow: 0 0 30px rgba(245, 179, 212, 0.2);
    }
    .login-subtitle {
      color: #f5b3d4;
      font-size: 0.95rem;
      letter-spacing: 2px;
      margin-bottom: 40px;
      font-weight: 300;
    }
    .password-input {
      width: 280px;
      padding: 18px 24px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.5);
      border-radius: 12px;
      color: #3d2e35;
      font-size: 1.2rem;
      text-align: center;
      letter-spacing: 4px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      transition: all 0.4s ease;
      outline: none;
    }
    .password-input:focus {
      background: rgba(255, 255, 255, 0.8);
      border-color: #f5b3d4;
      box-shadow: 0 0 20px rgba(245, 179, 212, 0.4),
                  inset 0 0 10px rgba(245, 179, 212, 0.1);
    }
    .password-input::placeholder {
      color: rgba(194, 24, 91, 0.3);
      letter-spacing: 2px;
    }
    .password-input.shake {
      animation: luxeShake 0.5s ease;
    }
    @keyframes luxeShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      75% { transform: translateX(6px); }
    }
    .unlock-btn {
      margin-top: 30px;
      padding: 16px 48px;
      background: linear-gradient(135deg, #f5b3d4 0%, #e895b8 100%);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.95rem;
      font-weight: 700;
      letter-spacing: 1.5px;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 10px 30px rgba(245, 179, 212, 0.4);
    }
    .unlock-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(245, 179, 212, 0.6);
    }
    .error-text {
      color: #c2185b;
      font-size: 0.85rem;
      margin-top: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
      letter-spacing: 0.5px;
    }
    .error-text.show {
      opacity: 1;
    }
    /* ========== OPENING EXPERIENCE ========== */
    #opening-page {
      position: fixed;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 95;
      opacity: 1;
      transition: opacity 1.5s ease 1s;
    }
    #opening-page.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .opening-envelope {
      perspective: 1200px;
    }
    .envelope-large {
      width: 300px;
      height: 220px;
      position: relative;
      transform-style: preserve-3d;
      animation: envelopeEntrance 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes envelopeEntrance {
      from {
        opacity: 0;
        transform: scale(0.7) rotateX(30deg);
      }
      to {
        opacity: 1;
        transform: scale(1) rotateX(0);
      }
    }
    .envelope-base-large {
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #fff9fc, #fce4ec);
      border-radius: 6px;
      box-shadow: 0 40px 100px rgba(194, 24, 91, 0.2),
                  0 0 60px rgba(245, 179, 212, 0.3),
                  inset -2px -2px 20px rgba(194, 24, 91, 0.1);
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .envelope-base-large:hover {
      transform: translateY(-5px);
      box-shadow: 0 50px 120px rgba(194, 24, 91, 0.2),
                  0 0 80px rgba(245, 179, 212, 0.4);
    }
    .envelope-flap-large {
      position: absolute;
      width: 100%;
      height: 55%;
      background: linear-gradient(135deg, #f5b3d4 0%, #e895b8 100%);
      transform-origin: top;
      transition: transform 1.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 8px 25px rgba(194, 24, 91, 0.2);
      border-radius: 2px 2px 0 0;
    }
    .envelope-large.open .envelope-flap-large {
      transform: rotateX(170deg);
    }
    .envelope-shine {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
      opacity: 0;
      animation: shine 2s ease;
    }
    @keyframes shine {
      0% { opacity: 0; }
      20%, 80% { opacity: 0.6; }
      100% { opacity: 0; }
    }
    .opening-text {
      position: absolute;
      bottom: -80px;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      color: rgba(245, 179, 212, 0.8);
      letter-spacing: 1px;
      white-space: nowrap;
      animation: breatheText 2s ease infinite;
    }
    @keyframes breatheText {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
    /* ========== MAIN CONTENT ========== */
    #main-content {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.8s ease;
      overflow: auto;
    }
    #main-content.visible {
      opacity: 1;
      pointer-events: auto;
    }
    /* ========== MENU PAGE ========== */
    #menu-page {
      min-height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      padding: 80px 20px 60px;
      display: none;
    }
    #menu-page.active {
      display: block;
      animation: pageEnter 0.8s ease;
    }
    @keyframes pageEnter {
      from {
        opacity: 0;
        transform: scale(0.97);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .menu-header {
      text-align: center;
      margin-bottom: 80px;
    }
    .menu-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 700;
      background: linear-gradient(135deg, #c2185b 0%, #f5b3d4 50%, #c2185b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 1px;
      margin-bottom: 15px;
      text-shadow: 0 0 40px rgba(245, 179, 212, 0.15);
    }
    .menu-subtitle {
      font-size: 0.95rem;
      color: #f5b3d4;
      letter-spacing: 2px;
      font-weight: 300;
    }
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 40px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .menu-card {
      position: relative;
      padding: 50px 30px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100%);
      backdrop-filter: blur(40px);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 28px;
      cursor: pointer;
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      overflow: hidden;
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .menu-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(245, 179, 212, 0.3) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    .menu-card:hover::before {
      opacity: 1;
    }
    .menu-card:hover {
      transform: translateY(-15px);
      border-color: rgba(245, 179, 212, 0.6);
      box-shadow: 0 20px 60px rgba(245, 179, 212, 0.25),
                  0 0 40px rgba(245, 179, 212, 0.15);
    }
    .card-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      display: block;
    }
    .card-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      font-weight: 600;
      color: #c2185b;
      margin-bottom: 12px;
      letter-spacing: 0.5px;
    }
    .card-description {
      font-size: 0.85rem;
      color: rgba(245, 179, 212, 0.8);
      font-weight: 300;
      letter-spacing: 0.3px;
      line-height: 1.6;
    }
    
    /* ========== ✨ ตกแต่งส่วนท้ายหน้าหลักให้สวยงาม ========== */
    .menu-footer {
      text-align: center;
      margin-top: 100px;
      padding: 60px 20px;
      position: relative;
    }
    
    .footer-heart-container {
      position: relative;
      margin-bottom: 40px;
      animation: footerHeartPulse 2s ease-in-out infinite;
    }
    
    @keyframes footerHeartPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .footer-main-heart {
      font-size: 6rem;
      filter: drop-shadow(0 10px 30px rgba(245, 179, 212, 0.6));
      display: inline-block;
    }
    
    .footer-sparkles {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }
    
    .footer-sparkle {
      position: absolute;
      font-size: 2rem;
      animation: sparkleOrbit 4s linear infinite;
    }
    
    .footer-sparkle:nth-child(1) {
      animation-delay: 0s;
      left: -80px;
      top: -40px;
    }
    
    .footer-sparkle:nth-child(2) {
      animation-delay: 1s;
      right: -80px;
      top: -40px;
    }
    
    .footer-sparkle:nth-child(3) {
      animation-delay: 2s;
      left: -60px;
      bottom: -40px;
    }
    
    .footer-sparkle:nth-child(4) {
      animation-delay: 3s;
      right: -60px;
      bottom: -40px;
    }
    
    @keyframes sparkleOrbit {
      0%, 100% {
        transform: scale(0.8) rotate(0deg);
        opacity: 0.4;
      }
      50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
      }
    }
    
    .footer-quote {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      color: #c2185b;
      font-weight: 600;
      margin-bottom: 20px;
      letter-spacing: 0.5px;
      line-height: 1.8;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .footer-subquote {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
      color: rgba(194, 24, 91, 0.7);
      font-style: italic;
      margin-bottom: 40px;
      letter-spacing: 0.3px;
    }
    
    .footer-decorations {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
      flex-wrap: wrap;
    }
    
    .footer-deco-item {
      font-size: 2.5rem;
      animation: floatUpDown 3s ease-in-out infinite;
      filter: drop-shadow(0 5px 15px rgba(245, 179, 212, 0.4));
    }
    
    .footer-deco-item:nth-child(1) { animation-delay: 0s; }
    .footer-deco-item:nth-child(2) { animation-delay: 0.5s; }
    .footer-deco-item:nth-child(3) { animation-delay: 1s; }
    .footer-deco-item:nth-child(4) { animation-delay: 1.5s; }
    .footer-deco-item:nth-child(5) { animation-delay: 2s; }
    
    @keyframes floatUpDown {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-15px);
      }
    }
    
    /* ========== MOMENTS PAGE ========== */
    #moments-page {
      min-height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      padding: 80px 20px 60px;
      display: none;
    }
    #moments-page.active {
      display: block;
      animation: pageEnter 0.8s ease;
    }
    .page-header {
      text-align: center;
      margin-bottom: 60px;
    }
    .page-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.5rem, 6vw, 3.5rem);
      font-weight: 700;
      color: #c2185b;
      letter-spacing: 1px;
      margin-bottom: 15px;
    }
    .page-subtitle {
      font-size: 0.9rem;
      color: #f5b3d4;
      letter-spacing: 1.5px;
      font-weight: 300;
    }
    .carousel-wrapper {
      max-width: 1000px;
      margin: 0 auto;
      perspective: 1200px;
    }
    .carousel {
      display: flex;
      gap: 30px;
      padding: 40px 20px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    .carousel::-webkit-scrollbar {
      display: none;
    }
    .moment-card {
      flex-shrink: 0;
      width: 320px;
      height: 380px;
      scroll-snap-align: center;
      position: relative;
    }
    .moment-card-inner {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 20px;
      padding: 40px 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 8px 32px rgba(245, 179, 212, 0.15);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .moment-card-inner::before {
      content: '';
      position: absolute;
      top: -100%;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent 0%, rgba(245, 179, 212, 0.2) 50%, transparent 100%);
      animation: luxeShimmer 3s ease infinite;
    }
    @keyframes luxeShimmer {
      0% { top: -100%; }
      50% { top: 100%; }
      100% { top: 100%; }
    }
    .moment-card:hover .moment-card-inner {
      transform: translateY(-10px);
      border-color: rgba(245, 179, 212, 0.6);
      box-shadow: 0 20px 60px rgba(245, 179, 212, 0.25),
                  0 0 40px rgba(245, 179, 212, 0.15);
    }
    .moment-text {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-weight: 500;
      color: #3d2e35;
      line-height: 1.8;
      letter-spacing: 0.3px;
      position: relative;
      z-index: 2;
    }
    .moment-text .her-name {
      font-family: 'Playfair Display', serif;
      color: #c2185b;
      font-weight: 700;
      font-style: italic;
    }
    .carousel-nav {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 40px;
    }
    .carousel-dot {
      width: 8px;
      height: 8px;
      background: rgba(245, 179, 212, 0.4);
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.4s ease;
    }
    .carousel-dot.active {
      width: 24px;
      border-radius: 4px;
      background: #f5b3d4;
      box-shadow: 0 0 15px rgba(245, 179, 212, 0.6);
    }
    /* ========== PICTURES PAGE ========== */
    #pictures-page {
      min-height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      padding: 80px 20px 60px;
      display: none;
    }
    #pictures-page.active {
      display: block;
      animation: pageEnter 0.8s ease;
    }
    .gallery-container {
      max-width: 900px;
      margin: 0 auto;
    }
    .gallery-focus {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin: 0 auto 60px;
      aspect-ratio: 4/3;
      perspective: 1200px;
    }
    .gallery-image-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 20px;
      overflow: hidden;
      background: rgba(245, 179, 212, 0.1);
      box-shadow: 0 30px 80px rgba(245, 179, 212, 0.15),
                  0 0 60px rgba(245, 179, 212, 0.1);
    }
    .gallery-image-wrapper::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
      z-index: 10;
      pointer-events: none;
    }
    .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.8s ease;
      filter: brightness(0.98);
    }
    .gallery-image-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: radial-gradient(ellipse at center, rgba(245, 179, 212, 0.1) 0%, rgba(255, 255, 255, 0.5) 100%);
      font-size: 3rem;
      color: rgba(245, 179, 212, 0.3);
    }
    .gallery-caption {
      text-align: center;
      margin-bottom: 40px;
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      color: #c2185b;
      letter-spacing: 0.5px;
      min-height: 30px;
      white-space: pre-line;
      opacity: 0;
      animation: fadeInUp 0.6s ease forwards;
    }
    
    /* ========== ⭐ EFFECT ลอยในแกลเลอรี่ ========== */
    .gallery-floating-decor {
      position: fixed;
      top: -100px;
      pointer-events: none;
      z-index: 999;
      animation: galleryFloatDown linear forwards;
      font-size: 60px;
      filter: drop-shadow(0 8px 12px rgba(245, 179, 212, 0.4));
    }
    
    @keyframes galleryFloatDown {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0.9;
      }
      100% {
        transform: translateY(110vh) translateX(var(--drift-x, 0px)) rotate(var(--rotate-end, 360deg));
        opacity: 0.3;
      }
    }
    
    .gallery-controls {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 40px;
    }
    .gallery-btn {
      padding: 14px 32px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.5);
      border-radius: 12px;
      color: #c2185b;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
    }
    .gallery-btn:hover {
      background: rgba(245, 179, 212, 0.2);
      border-color: #f5b3d4;
      box-shadow: 0 0 20px rgba(245, 179, 212, 0.3);
    }
    /* ========== SURPRISE PAGE ========== */
    #surprise-page {
      min-height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      padding: 80px 20px 60px;
      display: none;
    }
    #surprise-page.active {
      display: block;
      animation: pageEnter 0.8s ease;
    }
    .surprise-container {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }
    .surprise-box {
      margin: 80px auto;
      padding: 60px 40px;
      background: linear-gradient(135deg, rgba(245, 179, 212, 0.08) 0%, rgba(245, 179, 212, 0.02) 100%);
      border: 2px solid rgba(245, 179, 212, 0.3);
      border-radius: 24px;
      cursor: pointer;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    .surprise-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(245, 179, 212, 0.2) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    .surprise-box:hover::before {
      opacity: 1;
    }
    .surprise-box:hover {
      transform: scale(1.05);
      border-color: rgba(245, 179, 212, 0.6);
      box-shadow: 0 20px 60px rgba(245, 179, 212, 0.2),
                  0 0 40px rgba(245, 179, 212, 0.1);
    }
    .surprise-icon {
      font-size: 5rem;
      display: block;
      margin-bottom: 20px;
      animation: surpriseFloat 3s ease infinite;
      cursor: pointer;
      transition: font-size 0.15s ease;
    }
    .surprise-icon:hover {
      font-size: 6rem;
      filter: drop-shadow(0 0 20px rgba(245, 179, 212, 0.8));
    }
    @keyframes surpriseFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    .surprise-text {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      color: #c2185b;
      letter-spacing: 0.5px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .surprise-box:hover .surprise-text {
      opacity: 1;
    }
    .falling-message {
      position: fixed;
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      font-weight: 600;
      pointer-events: none;
      animation: messageFall 1.5s ease-in forwards;
      z-index: 50;
      letter-spacing: 0.5px;
      background: linear-gradient(135deg, #f5b3d4 0%, #ff69b4 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 30px rgba(245, 179, 212, 0.8);
      filter: drop-shadow(0 0 15px rgba(245, 179, 212, 0.6));
    }
    @keyframes messageFall {
      0% {
        opacity: 1;
        transform: translateY(-100px) translateX(var(--drift-x, 0px)) rotate(var(--drift-rotate, 0deg));
      }
      90% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateY(calc(100vh + 100px)) translateX(var(--drift-x, 0px)) rotate(var(--drift-rotate, 0deg));
      }
    }
    
    /* ========== ✨ SURPRISE MESSAGE WITH BOX ========== */
    .surprise-message-box {
      position: fixed;
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem;
      font-weight: 600;
      pointer-events: none;
      z-index: 9000;
      letter-spacing: 0.5px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 245, 249, 0.95));
      color: #c2185b;
      padding: 20px 30px;
      border-radius: 16px;
      border: 2px solid #f5b3d4;
      box-shadow: 0 15px 40px rgba(245, 179, 212, 0.4),
                  0 0 30px rgba(245, 179, 212, 0.3);
      backdrop-filter: blur(10px);
      max-width: 400px;
      text-align: center;
      line-height: 1.6;
      animation: messagePopUp 4s ease-in-out forwards;
    }
    
    @keyframes messagePopUp {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3);
      }
      15% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.1);
      }
      20% {
        transform: translate(-50%, -50%) scale(1);
      }
      85% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
      }
    }
    
    /* ========== CLICK HEART EFFECT ========== */
    .click-heart-effect {
      position: fixed;
      font-size: 3rem;
      pointer-events: none;
      z-index: 8999;
      animation: heartClickBurst 0.8s ease-out forwards;
      filter: drop-shadow(0 0 20px rgba(245, 179, 212, 0.8));
    }
    
    @keyframes heartClickBurst {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(2) translateY(-40px);
        opacity: 0;
      }
    }
    .surprise-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 300;
    }
    .surprise-modal.active {
      display: flex;
    }
    .surprise-modal-content {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
      padding: 60px 50px;
      border-radius: 28px;
      text-align: center;
      max-width: 500px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.3);
      animation: modalPopIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes modalPopIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .modal-question {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      color: #c2185b;
      font-weight: 700;
      margin-bottom: 40px;
      letter-spacing: 0.5px;
    }
    .modal-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .modal-yes-btn {
      padding: 14px 40px;
      background: linear-gradient(135deg, #f5b3d4 0%, #e895b8 100%);
      border: none;
      border-radius: 12px;
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 10px 30px rgba(245, 179, 212, 0.4);
    }
    .modal-yes-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(245, 179, 212, 0.6);
    }
    .modal-no-btn {
      padding: 14px 40px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 12px;
      color: #c2185b;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
      position: relative;
    }
    .modal-no-btn:hover {
      transform: translateX(150px);
      opacity: 0.3;
    }
    /* ========== GAME PAGE ========== */
    #game-page {
      min-height: 100%;
      background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
      padding: 80px 20px 60px;
      display: none;
    }
    #game-page.active {
      display: block;
      animation: pageEnter 0.8s ease;
    }
    .game-container {
      max-width: 800px;
      margin: 0 auto;
    }
    .game-area {
      position: relative;
      width: 100%;
      height: 500px;
      background: radial-gradient(ellipse at center, rgba(245, 179, 212, 0.08) 0%, rgba(255, 255, 255, 0.5) 100%);
      border: 2px solid rgba(245, 179, 212, 0.3);
      border-radius: 24px;
      margin-bottom: 40px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(245, 179, 212, 0.15);
    }
    .game-score {
      text-align: center;
      margin-bottom: 30px;
    }
    .score-label {
      font-size: 0.85rem;
      color: #f5b3d4;
      letter-spacing: 1.5px;
      margin-bottom: 10px;
    }
    .score-value {
      font-family: 'Playfair Display', serif;
      font-size: 3rem;
      font-weight: 700;
      color: #c2185b;
      text-shadow: 0 0 30px rgba(245, 179, 212, 0.4);
    }
    .game-object {
      position: absolute;
      font-size: 2.5rem;
      cursor: pointer;
      animation: objectFall linear forwards;
      filter: drop-shadow(0 0 15px rgba(245, 179, 212, 0.4));
      transition: transform 0.2s ease;
    }
    .game-object:hover {
      transform: scale(1.3);
    }
    /* ========== IMPROVED GAME - FRUIT NINJA STYLE ========== */
    .game-object {
      position: absolute;
      font-size: 5rem;
      cursor: pointer;
      filter: drop-shadow(0 0 25px rgba(245, 179, 212, 0.9));
      transition: transform 0.15s ease;
      user-select: none;
      z-index: 10;
    }
    .game-object:hover {
      transform: scale(1.4);
      filter: drop-shadow(0 0 35px rgba(255, 105, 180, 1));
    }
    @keyframes objectJump {
      0% {
        transform: translateY(0) rotate(0deg) scale(1);
        opacity: 1;
      }
      45% {
        transform: translateY(var(--jump-height)) rotate(var(--rotation)) scale(1.1);
        opacity: 1;
      }
      100% {
        transform: translateY(20px) rotate(calc(var(--rotation) * 2.5)) scale(0.7);
        opacity: 0;
      }
    }
    /* ========== BEAUTIFUL CLICK EFFECTS ========== */
    .click-effect {
      position: absolute;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      pointer-events: none;
      animation: clickExplosion 0.7s ease-out forwards;
      z-index: 100;
      border: 4px solid;
      box-shadow: 0 0 30px currentColor;
    }
    @keyframes clickExplosion {
      0% {
        transform: scale(0.2);
        opacity: 1;
      }
      50% {
        transform: scale(1.5);
        opacity: 0.8;
      }
      100% {
        transform: scale(3.5);
        opacity: 0;
      }
    }
    .score-popup {
      position: absolute;
      font-family: 'Playfair Display', serif;
      font-size: 3rem;
      font-weight: 700;
      pointer-events: none;
      animation: scoreFloat 1.2s ease-out forwards;
      z-index: 101;
      text-shadow: 0 0 25px currentColor, 0 0 50px currentColor;
    }
    @keyframes scoreFloat {
      0% {
        transform: translateY(0) scale(0.3);
        opacity: 1;
      }
      50% {
        transform: translateY(-60px) scale(1.3);
        opacity: 1;
      }
      100% {
        transform: translateY(-120px) scale(1.6);
        opacity: 0;
      }
    }
    .hit-particle {
      position: absolute;
      font-size: 2rem;
      pointer-events: none;
      z-index: 99;
    }
    @keyframes particleBurst {
      0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(0.3) rotate(var(--rotation));
        opacity: 0;
      }
    }
    @keyframes objectFall {
      to {
        transform: translateY(100%);
      }
    }
    .game-controls {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    .game-btn {
      padding: 14px 32px;
      background: rgba(245, 179, 212, 0.2);
      border: 1px solid rgba(245, 179, 212, 0.5);
      border-radius: 12px;
      color: #c2185b;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
    }
    .game-btn:hover {
      background: rgba(245, 179, 212, 0.3);
      box-shadow: 0 0 20px rgba(245, 179, 212, 0.4);
    }
    .game-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.85);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 100;
      border-radius: 24px;
    }
    .overlay-text {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      color: #c2185b;
      margin-bottom: 30px;
      letter-spacing: 0.5px;
    }
    .overlay-subtext {
      font-size: 0.9rem;
      color: rgba(245, 179, 212, 0.9);
      margin-top: 15px;
      letter-spacing: 0.3px;
      line-height: 1.8;
    }
    .game-info {
      margin-top: 30px;
      font-size: 0.8rem;
      color: rgba(245, 179, 212, 0.7);
      letter-spacing: 0.3px;
      line-height: 1.8;
    }
    /* ========== VALENTINE PAGE ========== */
    #valentine-page {
        min-height: auto;
        background: linear-gradient(135deg,#fff5f9 0%,#ffe4f0 50%,#fff5f9 100%);
        padding: 80px 20px 0px;

        display: flex;
        flex-direction: column;

        justify-content: flex-start; /* ⭐ สำคัญ */
        align-items: center;
    }

    #valentine-page.active {
      display: flex;
      animation: pageEnter 0.8s ease;
    }
    .heartbeat-container {
      text-align: center;
      animation: heartbeatZoom 1.2s ease;
    }
    @keyframes heartbeatZoom {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .heartbeat-icon {
      font-size: 5rem;
      margin-bottom: 40px;
      animation: heartbeatPulse 1.5s ease infinite;
    }
    @keyframes heartbeatPulse {
      0%, 100% {
        transform: scale(1);
      }
      25% {
        transform: scale(1.15);
      }
      50% {
        transform: scale(1);
      }
    }
    .valentine-question {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.5rem, 6vw, 3.5rem);
      font-weight: 700;
      color: #c2185b;
      letter-spacing: 1px;
      margin-bottom: 20px;
      text-shadow: 0 0 40px rgba(245, 179, 212, 0.2);
      line-height: 1.6;
    }
    .valentine-hint {
      font-size: 0.95rem;
      color: #f5b3d4;
      letter-spacing: 1px;
      margin-bottom: 60px;
      animation: hintFade 2s ease infinite;
    }
    @keyframes hintFade {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    .valentine-buttons {
      display: flex;
      gap: 30px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 80px;
    }
    /* ========== VALENTINE MODAL ========== */
    .valentine-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 400;
    }
    .valentine-modal.active {
      display: flex;
    }
    .valentine-modal-content {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
      padding: 80px 60px;
      border-radius: 28px;
      text-align: center;
      max-width: 600px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.3);
      animation: modalPopIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .valentine-modal-question {
      font-family: 'Playfair Display', serif;
      font-size: 2.2rem;
      color: #c2185b;
      font-weight: 700;
      margin-bottom: 20px;
      letter-spacing: 0.5px;
      line-height: 1.6;
    }
    .valentine-modal-hint {
      font-size: 0.95rem;
      color: #f5b3d4;
      letter-spacing: 1px;
      margin-bottom: 40px;
      font-weight: 300;
    }
    .yes-btn {
      padding: 18px 60px;
      background: linear-gradient(135deg, #f5b3d4 0%, #e895b8 100%);
      border: none;
      border-radius: 12px;
      color: #fff;
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 15px 40px rgba(245, 179, 212, 0.4);
      animation: yesPulse 2s ease infinite;
    }
    @keyframes yesPulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 15px 40px rgba(245, 179, 212, 0.4);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 20px 50px rgba(245, 179, 212, 0.6);
      }
    }
    .yes-btn:hover {
      transform: scale(1.08);
      box-shadow: 0 25px 60px rgba(245, 179, 212, 0.7);
    }
    .no-btn {
      padding: 18px 60px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 12px;
      color: rgba(245, 179, 212, 0.9);
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
    }
    .no-btn:hover {
      transform: translateX(200px);
      opacity: 0.5;
    }
    /* ========== FINAL PAGE ========== */
    #final-page {

    position: fixed;
    top:0;
    left:0;

    width:100%;
    height:100vh;

    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:25px;

    background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 50%, #fff5f9 100%);
    padding:20px;
    z-index:200;
    text-align:center;
    }

    #final-page.active{
    display:flex;
    animation: pageEnter 1s ease;
    }

    /* ⭐ แก้ตัวดัน layout */
    .final-message{
    margin:0;
    transform: translateY(-20px);
    }

    /* ⭐ ปุ่มให้ดูเป็น CTA หลัก */
    .secret-btn{
    padding:16px 40px;
    font-size:1rem;
    border-radius:14px;
    border:none;
    cursor:pointer;

    background: linear-gradient(135deg,#c2185b,#f5b3d4);
    color:white;
    font-weight:600;
    letter-spacing:1px;

    box-shadow:0 10px 30px rgba(194,24,91,0.3);
    transition:0.3s;
    }

    .secret-btn:hover{
    transform:translateY(-5px) scale(1.05);
    box-shadow:0 20px 40px rgba(194,24,91,0.45);
    }

    .final-effects {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }
    .final-content {
      position: relative;
      z-index: 20;
      animation: finalAppear 2s ease;
    }
    @keyframes finalAppear {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .final-icon {
      font-size: 6rem;
      margin-bottom: 40px;
      animation: finalIconFloat 3s ease infinite;
    }
    @keyframes finalIconFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    .final-message {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      color: #c2185b;
      line-height: 1.8;
      letter-spacing: 0.5px;
      margin-bottom: 30px;
      text-shadow: 0 0 40px rgba(245, 179, 212, 0.2);
    }
    .final-subtext {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.2rem;
      color: #3d2e35;
      font-weight: 500;
      letter-spacing: 0.3px;
      opacity: 0;
      animation: finalSubtextAppear 1.5s ease forwards 2.5s;
    }
    @keyframes finalSubtextAppear {
      to {
        opacity: 1;
      }
    }
    /* ========== CELEBRATION EFFECTS ========== */
    .firework {
      position: fixed;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      animation: fireworkExplode 1.2s ease forwards;
      pointer-events: none;
      z-index: 99;
    }
    @keyframes fireworkExplode {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
      }
    }
    .confetti-piece {
      position: fixed;
      animation: confettiDrop 3s ease forwards;
      pointer-events: none;
      z-index: 99;
    }
    @keyframes confettiDrop {
      to {
        transform: translateY(100%) rotate(720deg);
        opacity: 0;
      }
    }
    .rose-bloom {
      position: fixed;
      font-size: 3rem;
      animation: roseBloom 2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      pointer-events: none;
      z-index: 99;
    }
    @keyframes roseBloom {
      0% {
        transform: scale(0) rotate(-180deg);
        opacity: 0;
      }
      50% {
        transform: scale(1.3) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
      }
    }
    /* ========== MEGA WIN CELEBRATION (99 POINTS) ========== */
    .mega-celebration-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      background: radial-gradient(circle, rgba(255,182,193,0.4) 0%, rgba(255,192,203,0.2) 50%, transparent 100%);
      animation: megaCelebBg 3s ease-in-out;
    }
    @keyframes megaCelebBg {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
    .celebration-heart {
      position: absolute;
      font-size: 4rem;
      animation: heartExplode 3s ease-out forwards;
      filter: drop-shadow(0 0 20px currentColor);
    }
    @keyframes heartExplode {
      0% {
        transform: translate(0, 0) scale(0) rotate(0deg);
        opacity: 1;
      }
      60% {
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(2.5) rotate(var(--rotation));
        opacity: 0;
      }
    }
    .celebration-flower {
      position: absolute;
      font-size: 3.5rem;
      animation: flowerBurst 2.5s ease-out forwards;
      filter: drop-shadow(0 0 18px rgba(255, 105, 180, 0.9));
    }
    @keyframes flowerBurst {
      0% {
        transform: translate(0, 0) scale(0) rotate(-180deg);
        opacity: 0;
      }
      40% {
        opacity: 1;
      }
      60% {
        transform: translate(var(--tx), var(--ty)) scale(1.8) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(1.5) rotate(20deg);
        opacity: 0.8;
      }
    }
    .celebration-balloon {
      position: fixed;
      font-size: 3rem;
      animation: balloonFloat 5s ease-out forwards;
      filter: drop-shadow(0 0 15px rgba(245, 179, 212, 0.8));
    }
    @keyframes balloonFloat {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(-150vh) translateX(var(--drift)) rotate(var(--rotation));
        opacity: 0;
      }
    }
    .celebration-sparkle {
      position: absolute;
      font-size: 2.5rem;
      animation: sparkleRise 3s ease-out forwards;
      filter: drop-shadow(0 0 10px gold);
    }
    @keyframes sparkleRise {
      0% {
        transform: translateY(0) scale(0.5);
        opacity: 0;
      }
      20% {
        opacity: 1;
      }
      100% {
        transform: translateY(-200px) scale(1.5);
        opacity: 0;
      }
    }
    .win-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Playfair Display', serif;
      font-size: 4rem;
      font-weight: 700;
      color: #c2185b;
      text-align: center;
      z-index: 10000;
      animation: winMessageAppear 2s ease-out;
      text-shadow: 0 0 30px rgba(245, 179, 212, 0.8),
                   0 0 60px rgba(255, 105, 180, 0.6);
      pointer-events: none;
    }
    @keyframes winMessageAppear {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.3);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }
    /* ========== BACK BUTTON ========== */
    .back-btn {
      position: fixed;
      top: 30px;
      left: 30px;
      padding: 12px 24px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 8px;
      color: #c2185b;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.4s ease;
      z-index: 500;
    }
    .back-btn:hover {
      background: rgba(245, 179, 212, 0.2);
      border-color: #f5b3d4;
      box-shadow: 0 0 15px rgba(245, 179, 212, 0.3);
    }
    /* ========== MUSIC CONTROL ========== */
    .music-control {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(245, 179, 212, 0.4);
      border-radius: 50%;
      color: #c2185b;
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.4s ease;
      z-index: 500;
    }
    .music-control:hover {
      background: rgba(245, 179, 212, 0.2);
      box-shadow: 0 0 20px rgba(245, 179, 212, 0.4);
    }
    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
      .menu-grid {
        grid-template-columns: 1fr;
      }
      .valentine-buttons {
        gap: 15px;
      }
      .yes-btn,
      .no-btn {
        padding: 14px 40px;
        font-size: 1.1rem;
      }
      .moment-card {
        width: 280px;
        height: 340px;
      }
      .back-btn {
        top: 15px;
        left: 15px;
      }
      .music-control {
        bottom: 15px;
        right: 15px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div class="app-wrapper">
   <div class="vignette"></div><!-- LOADING SCREEN -->
   <div id="loading-screen">
    <div class="loading-content">
     <div class="loading-quote" id="loading-quote">
      In a world full of ordinary moments…<br>
       there is one person who makes everything extraordinary.
     </div>
     <div class="loading-name" id="loading-name">
      Her name is Blue.
     </div>
     <div class="loading-dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
     </div>
    </div>
   </div><!-- LOGIN PAGE -->
   <div id="login-page">
    <div class="login-container">
     <div class="envelope-3d">
      <div class="envelope-object" id="login-envelope">
       <div class="envelope-base">
        <div class="envelope-flap"></div>
        <div class="envelope-glow"></div>
        <div class="envelope-shine"></div>
       </div>
      </div>
     </div>
     <h1 class="login-text">Frome ME to YOU</h1>
     <p class="login-subtitle">ENTER THE SECRET CODE</p><input type="password" id="password-input" class="password-input" placeholder="••••••" maxlength="6">
     <p class="error-text" id="error-text">Incorrect. Please try again.</p><button class="unlock-btn" onclick="verifyPassword()">UNLOCK</button>
    </div>
   </div><!-- OPENING EXPERIENCE -->
   <div id="opening-page">
    <div class="opening-envelope">
     <div class="envelope-large" id="main-envelope">
      <div class="envelope-base-large">
       <div class="envelope-flap-large"></div>
       <div class="envelope-shine"></div>
      </div>
     </div>
     <div class="opening-text">
      Click to reveal the magic inside...
     </div>
    </div>
   </div><!-- MAIN CONTENT -->
   <div id="main-content"><!-- MENU PAGE -->
    <div id="menu-page">
     <div class="menu-header">
      <h1 class="menu-title" id="menu-title">For Blue</h1>
      <p class="menu-subtitle">MY FOREVER STORY</p>
     </div>
     <div class="menu-grid">
      <div class="menu-card" onclick="navigateTo('moments')"><span class="card-icon">💕</span>
       <h2 class="card-title">Our Moments</h2>
       <p class="card-description">Letters written from my heart to you</p>
      </div>
      <div class="menu-card" onclick="navigateTo('pictures')"><span class="card-icon">📸</span>
       <h2 class="card-title">Our Pictures</h2>
       <p class="card-description">Captured memories of us</p>
      </div>
      <div class="menu-card" onclick="navigateTo('surprise')"><span class="card-icon">✨</span>
       <h2 class="card-title">Surprise Me</h2>
       <p class="card-description">Something magical for you</p>
      </div>
      <div class="menu-card" onclick="navigateTo('game')"><span class="card-icon">🎮</span>
       <h2 class="card-title">Love Catch</h2>
       <p class="card-description">A romantic challenge</p>
      </div>
     </div>
     
     <!-- ✨ ส่วนท้ายหน้าหลักที่สวยงาม -->
     <div class="menu-footer">
       <div class="footer-heart-container">
         <div class="footer-main-heart">💕</div>
         <div class="footer-sparkles">
           <div class="footer-sparkle">✨</div>
           <div class="footer-sparkle">💫</div>
           <div class="footer-sparkle">⭐</div>
           <div class="footer-sparkle">🌟</div>
         </div>
       </div>
       
       <p class="footer-quote">
         "In a sky full of stars,<br>
         you're the one that shines the brightest."
       </p>
       
       <p class="footer-subquote">
         Every moment with you is a treasure I hold close to my heart.
       </p>
       
       <div class="footer-decorations">
         <span class="footer-deco-item">🌹</span>
         <span class="footer-deco-item">💐</span>
         <span class="footer-deco-item">🌸</span>
         <span class="footer-deco-item">🌷</span>
         <span class="footer-deco-item">🌺</span>
       </div>
     </div>
     
     <div style="text-align: center; margin-top: 60px; padding-bottom: 40px;">
       <button class="unlock-btn" onclick="navigateTo('valentine')" style="background: linear-gradient(135deg, #f5b3d4, #e895b8); color: #fff;">🩵 One QUESTION 💙</button>
     </div>
    </div><!-- MOMENTS PAGE -->
    <div id="moments-page"><button class="back-btn" onclick="navigateTo('menu')">← BACK</button>
     <div class="page-header">
      <h1 class="page-title">Our Moments</h1>
      <p class="page-subtitle">LOVE LETTERS FOR BLUE</p>
     </div>
     <div class="carousel-wrapper">
      <div class="carousel" id="moments-carousel"><!-- Cards generated by JS -->
      </div>
      <div class="carousel-nav" id="carousel-nav"><!-- Dots generated by JS -->
      </div>
     </div>
    </div><!-- PICTURES PAGE -->
    <div id="pictures-page"><button class="back-btn" onclick="navigateTo('menu')">← BACK</button>
     <div class="page-header">
      <h1 class="page-title">Our Pictures</h1>
      <p class="page-subtitle">OUR LOVE IN FRAMES</p>
     </div>
     <div class="gallery-container">
      <div class="gallery-focus">
       <div class="gallery-image-wrapper">
        <div id="gallery-image-container" class="gallery-image-placeholder">
         📷
        </div>
       </div>
      </div>
      <div class="gallery-caption" id="gallery-caption">
       Add your photos to the array
      </div>
      <div class="gallery-controls"><button class="gallery-btn" onclick="previousImage()">⟸ 💝💝 PREVIOUS</button> <button class="gallery-btn" onclick="nextImage()">NEXT 💝💝 ⟹</button>
      </div>
     </div>
    </div><!-- SURPRISE PAGE -->
    <div id="surprise-page"><button class="back-btn" onclick="navigateTo('menu')">← BACK</button>
     <div class="page-header">
      <h1 class="page-title">Surprise Me</h1>
      <p class="page-subtitle">A MOMENT OF MAGIC</p>
     </div>
     <div class="surprise-container">
      <div class="surprise-box" id="surprise-box" onmouseenter="showSurpriseHint()" onmouseleave="hideSurpriseHint()" onclick="triggerSurprise()"><span class="surprise-icon">💝</span>
       <p class="surprise-text">Blue… click this. Let love fall around you.</p>
      </div>
     </div>
    </div><!-- SURPRISE MODAL -->
    <div class="surprise-modal" id="surprise-modal">
     <div class="surprise-modal-content">
      <p class="modal-question" id="modal-question">Blue… Do you love me?</p>
      <div class="modal-buttons"><button class="modal-yes-btn" onclick="closeSurpriseModal(true)">YES 💕</button> <button class="modal-no-btn" id="modal-no-btn" onmouseover="runAwayNoButton()">NO</button>
      </div>
     </div>
    </div><!-- GAME PAGE -->
    <div id="game-page"><button class="back-btn" onclick="navigateTo('menu')">← BACK</button>
     <div class="page-header">
      <h1 class="page-title">Love Catch</h1>
      <p class="page-subtitle">A ROMANTIC CHALLENGE</p>
     </div>
     <div class="game-container">
      <div class="game-score">
       <p class="score-label">YOUR SCORE</p>
       <p class="score-value" id="game-score">0</p>
      </div>
      <div class="game-area" id="game-area">
       <div class="game-overlay" id="game-overlay"><button class="unlock-btn" onclick="startGame()" style="background: linear-gradient(135deg, #f5b3d4, #e895b8); color: #fff; margin: 0;"> START GAME </button>
       </div>
      </div>
      <div class="game-info">
        😎 กดแวนเทพ: +5 | 😼 กดแวนเทพซ่า007: +3 | 🐷 กดบลูอ้วน: +2 | 💔 กดBroken: -4<br>
        Reach 99 points to unlock the finale.
      </div>
     </div>
    </div><!-- VALENTINE PAGE -->
    <div id="valentine-page">
     <div class="heartbeat-container">
      <div class="heartbeat-icon">
       💕
      </div>
     </div>
    </div><!-- VALENTINE MODAL -->
    <div class="valentine-modal" id="valentine-modal">
     <div class="valentine-modal-content">
      <p class="valentine-modal-question">Blue…<br>
       Will you be my Valentine?</p>
      <p class="valentine-modal-hint">Don't let a love like this wait…</p>
      <div class="valentine-buttons"><button class="yes-btn" onclick="sayYes()">YES 💕</button> <button class="no-btn" id="valentine-no-btn" onmouseover="runAwayValentineNo()">NO</button>
      </div>
     </div>
    </div><!-- FINAL PAGE -->
    <!-- SECRET PAGE -->
    <div id="secret-page" style="
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    background:#000;
    display:none;
    justify-content:center;
    align-items:center;
    z-index:999;
    ">
    
    </div>

    <div id="final-page">
      <button class="back-btn" onclick="navigateTo('menu')">
      ← Back
      </button>
     <div class="final-effects" id="final-effects"></div>
     <div class="final-content">
      <div class="final-icon">
       💫
      </div>
      <h1 class="final-message" id="final-message">Blue…<br><span style="background: linear-gradient(135deg, #c2185b, #f5b3d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">You are my forever.</span></h1>

      <a href="ascii.html" target="_blank" class="secret-btn">
      💌 Click this
      </a>


      <p class="final-subtext" id="final-subtext" style="margin-top:30px;">And in every lifetime…<br>
        I will always find you.</p>
     </div>
    </div>
   </div><!-- CONTROLS --> <button class="music-control" id="music-toggle" onclick="toggleMusic()">🔊</button> <!-- AUDIO -->
   <audio id="bg-music" loop><source src="https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/Me%20to%20You%2C%20You%20to%20Me%20(Inst.).mp3" type="audio/mp3">
   </audio>
  </div>
  <script>
    // ==================== CONFIGURATION ====================
    const defaultConfig = {
      her_name: 'Blue',
      opening_message: 'In a world full of ordinary moments… there is one person who makes everything extraordinary.',
      confession_text: 'You are my forever.'
    };
    let config = { ...defaultConfig };
    // Love messages for Blue carousel
    const loveMessages = [
      "Blue, You are my today and all of my tomorrows.",
      "You walked into my life and quietly became my everything.",
      "If I searched the whole universe... I'd still find my way to you, Blue.",
      "Time feels kinder when I spend it with you, Blue.",
      "Blue… you are the quiet answer to prayers I never said out loud.",
      "In a world full of change, you are my constant.",
      "Somewhere along the way, Blue.. you became my favorite hello and my hardest goodbye"
    ];
    // Gallery images
    const galleryImages = [
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91215_resize.jpg', caption: '🤣 Laughing Together 😆\n"If happiness had a sound, it would be our laughter."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91220_resize.jpg', caption: '⛅ Sunset 🌅\n"Even the sunset pauses to admire us."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91218.jpg', caption: '🌿 Bang Kachao 🌿\n"Quiet paths, slow hours, and a heart that felt lighter."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91217.jpg', caption: '🏝️ Koh Larn 🏖️\n"Blue sea, clear skies, and you beside me ... perfection."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91219_resize.jpg', caption: '🌊 Hua Hin 🐚\n"Every wave whispered the same thing ... just the comfort of being together."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91216_resize.jpg', caption: '🙏 Ayutthaya Trip 🕯️\n"Some places you visit once ... this one stays with me because of you."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91213_resize.jpg', caption: '🪔 Loy Krathong 🪷\n"Lights on the water, quiet wishes in my heart."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91214_resize.jpg', caption: '🎄 Christmas 🎁\n"Nothing extravagant Warm company."' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91221.jpg', caption: 'If I could pause a moment, it might be this one.' },
      { url: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91212.jpg', caption: "Every place feels magical when I'm with you." }
    ];
    // Surprise messages for Blue
    const surpriseMessages = [
      "เพียงแค่เดินข้างๆ กันธรรมดาๆ ก็ดีมากแล้ว",
      "ไม่ได้ต้องการอะไรหวือหวา แค่มีกันอยู่เรื่อยๆ ก็พอ",
      "เป็นรอยยิ้มที่อยากรักษามันไว้เรื่อย ๆ",
      "วันธรรมดาเลยกลับกลายเป็นวันดีๆ ไปหมด",
      "ไม่รู้เรียกว่าโชคดีได้ไหม แต่ดีใจที่เจอ",
      "ไม่เก่งเรื่องพูดคำหวาน แต่น่าจะเก่งเรื่องอยู่ข้างๆ",
      "เป็นความสบายใจที่ไม่ต้องพยายามหา",
      "เป็นความธรรมดาที่อยากรักษาไว้ที่สุด",
      "ไม่ต้องสัญญาอะไร แค่ทำเหมือนเดิมก็พอ",
      "ต่อให้โลกวุ่นวายแค่ไหน ตรงนี้ก็ยังน่าอยู่เสมอ",
      "เป็นรอยยิ้มเล็กๆ ที่เกิดขึ้นบ่อยโดยไม่รู้ตัว",
      "อาจไม่ได้ดีที่สุด แต่จะอยู่ตรงนี้ให้นานที่สุด",
      "จะไม่หายไปในวันที่ต้องการมากที่สุด",
      "เที่ยวด้วยกัน เดินทางด้วยกัน ทุกที่ไปเลย"
    ];
    let isDropping = false;
    
    // ==================== SDK INITIALIZATION ====================
    async function initializeApp() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: handleConfigChange,
          mapToCapabilities: (cfg) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['her_name', cfg.her_name || defaultConfig.her_name],
            ['opening_message', cfg.opening_message || defaultConfig.opening_message],
            ['confession_text', cfg.confession_text || defaultConfig.confession_text]
          ])
        });
        config = { ...defaultConfig, ...window.elementSdk.config };
      }
      handleConfigChange(config);
      createAmbientParticles();
      setupCursorTrail();
      setupMenuParallax();
    }
    
    async function handleConfigChange(cfg) {
      config = { ...config, ...cfg };
      const loadingQuote = document.getElementById('loading-quote');
      if (loadingQuote) loadingQuote.textContent = config.opening_message || defaultConfig.opening_message;
      const loadingName = document.getElementById('loading-name');
      if (loadingName) loadingName.textContent = `Her name is ${config.her_name || defaultConfig.her_name}.`;
      const menuTitle = document.getElementById('menu-title');
      if (menuTitle) menuTitle.textContent = `For ${config.her_name || defaultConfig.her_name}`;
      const finalMsg = document.getElementById('final-message');
      if (finalMsg) {
        finalMsg.innerHTML = `${config.her_name || defaultConfig.her_name}…<br>
          <span style="background: linear-gradient(135deg, #c2185b, #f5b3d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">${config.confession_text || defaultConfig.confession_text}</span>`;
      }
      const valQuestion = document.getElementById('valentine-question');
      if (valQuestion) valQuestion.innerHTML = `${config.her_name || defaultConfig.her_name}…<br>Will you be my Valentine?`;
    }
    
    // ==================== CURSOR TRAIL ====================
    function setupCursorTrail() {
      document.addEventListener('mousemove', (e) => {
        if (Math.random() > 0.85) {
          const trail = document.createElement('div');
          trail.className = 'cursor-trail';
          trail.style.left = e.clientX + 'px';
          trail.style.top = e.clientY + 'px';
          document.body.appendChild(trail);
          setTimeout(() => trail.remove(), 1000);
        }
      });
    }
    
    // ==================== AMBIENT PARTICLES ====================
    function createAmbientParticles() {
      setInterval(() => {
        const particle = document.createElement('div');
        particle.className = 'particle pink-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDuration = (8 + Math.random() * 6) + 's';
        particle.style.animationDelay = Math.random() * 2 + 's';
        document.body.appendChild(particle);
        setTimeout(() => particle.remove(), 14000);
      }, 3000);
    }
    
    // ==================== PARALLAX ====================
    function setupMenuParallax() {
      const cards = document.querySelectorAll('.menu-card');
      document.addEventListener('mousemove', (e) => {
        const mouseX = e.clientX / window.innerWidth;
        const mouseY = e.clientY / window.innerHeight;
        cards.forEach(card => {
          card.style.setProperty('--mouse-x', (mouseX * 100) + '%');
          card.style.setProperty('--mouse-y', (mouseY * 100) + '%');
        });
      });
    }
    
    // ==================== LOGIN ====================
    const passwordInput = document.getElementById('password-input');
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') verifyPassword();
    });
    
    function verifyPassword() {
      const pwd = passwordInput.value;
      const errorText = document.getElementById('error-text');
      const loginEnvelope = document.getElementById('login-envelope');
      if (pwd === 'myblue') {
        errorText.classList.remove('show');
        loginEnvelope.classList.add('open');
        setTimeout(() => openToEnvelope(), 1200);
      } else {
        passwordInput.classList.add('shake');
        errorText.classList.add('show');
        setTimeout(() => passwordInput.classList.remove('shake'), 500);
        passwordInput.value = '';
      }
    }
    
    // ==================== ENVELOPE OPENING ====================
    function openToEnvelope() {
      const loginPage = document.getElementById('login-page');
      const openingPage = document.getElementById('opening-page');
      loginPage.classList.add('hidden');
      openingPage.classList.remove('hidden');
      setTimeout(() => {
        const mainEnvelope = document.getElementById('main-envelope');
        mainEnvelope.addEventListener('click', () => {
          mainEnvelope.classList.add('open');
          playMusic();
          createPetalRain();
          setTimeout(() => {
            openingPage.classList.add('hidden');
            const mainContent = document.getElementById('main-content');
            mainContent.classList.add('visible');
            showPage('menu');
          }, 2000);
        });
      }, 500);
    }
    
    function createPetalRain() {
      for (let i = 0; i < 40; i++) {
        setTimeout(() => {
          const petal = document.createElement('div');
          petal.style.position = 'fixed';
          petal.style.left = Math.random() * 100 + '%';
          petal.style.top = '-50px';
          petal.textContent = ['🌹', '💕', '✨', '🌸'][Math.floor(Math.random() * 4)];
          petal.style.fontSize = '1.5rem';
          petal.style.pointerEvents = 'none';
          petal.style.zIndex = '90';
          petal.style.animation = `messageFall 5s ease-in forwards`;
          document.body.appendChild(petal);
          setTimeout(() => petal.remove(), 5000);
        }, i * 100);
      }
    }
    
    // ==================== NAVIGATION ====================
    function navigateTo(page) {
      const pages = ['menu', 'moments', 'pictures', 'surprise', 'game', 'valentine', 'final'];
      pages.forEach(p => {
        const el = document.getElementById(p + '-page');
        if (el) el.classList.remove('active');
      });
      
      // ✅ หยุดเอฟเฟกต์ลอยเมื่อออกจากหน้า Gallery
      if (page !== 'pictures') {
        stopGalleryFloatingEffect();
      }
      
      const target = document.getElementById(page + '-page');
      if (target) {
        target.classList.add('active');
        if (page === 'moments') initMomentsCarousel();
        if (page === 'pictures') {
          initGallery();
          startGalleryFloatingEffect(); // เริ่มเอฟเฟกต์ลอย
        }
        if (page === 'valentine') {
          // Show modal instead of buttons
          document.getElementById('valentine-modal').classList.add('active');
        }
      }
    }
    
    function showPage(page) {
      navigateTo(page);
    }
    
    // ==================== MOMENTS CAROUSEL ====================
    function initMomentsCarousel() {
      const carousel = document.getElementById('moments-carousel');
      const nav = document.getElementById('carousel-nav');
      carousel.innerHTML = '';
      nav.innerHTML = '';
      loveMessages.forEach((message, index) => {
        const card = document.createElement('div');
        card.className = 'moment-card';
        let displayMessage = message.replace(/Blue/g, `<span class="her-name">Blue</span>`);
        card.innerHTML = `
          <div class="moment-card-inner">
            <p class="moment-text">"${displayMessage}"</p>
          </div>
        `;
        carousel.appendChild(card);
        const dot = document.createElement('div');
        dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
        dot.onclick = () => scrollToMoment(index);
        nav.appendChild(dot);
      });
      carousel.addEventListener('scroll', updateMomentDots);
    }
    
    function scrollToMoment(index) {
      const carousel = document.getElementById('moments-carousel');
      const cards = carousel.querySelectorAll('.moment-card');
      if (cards[index]) {
        cards[index].scrollIntoView({ behavior: 'smooth', inline: 'center' });
      }
    }
    
    function updateMomentDots() {
      const carousel = document.getElementById('moments-carousel');
      const dots = document.querySelectorAll('.carousel-dot');
      const scrollPos = carousel.scrollLeft;
      const cardWidth = 350;
      const activeIndex = Math.round(scrollPos / cardWidth);
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === activeIndex);
      });
    }
    
    // ==================== GALLERY ====================
    let currentImageIndex = 0;
    let galleryFloatingInterval = null;
    
    function initGallery() {
      const hasImages = galleryImages.some(img => img.url);
      const container = document.getElementById('gallery-image-container');
      if (!hasImages) {
        container.innerHTML = '<div class="gallery-image-placeholder">📷</div>';
        document.getElementById('gallery-caption').textContent = 'Add your photos to the array';
        return;
      }
      updateGalleryImage();
    }
    
    function nextImage() {
      currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
      updateGalleryImage();
    }
    
    function previousImage() {
      currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
      updateGalleryImage();
    }
    
    function updateGalleryImage() {
      const container = document.getElementById('gallery-image-container');
      const caption = document.getElementById('gallery-caption');
      const img = galleryImages[currentImageIndex];
      if (img.url) {
        container.innerHTML = `<img src="${img.url}" alt="${img.caption}" loading="lazy" class="gallery-image" onerror="this.style.background='linear-gradient(135deg, #f5b3d4, #e895b8)'; this.alt='Image unavailable';">`;
      } else {
        container.innerHTML = '<div class="gallery-image-placeholder">📷</div>';
      }
      caption.textContent = img.caption;
    }
    
    // ========== ⭐ เอฟเฟกต์ลอยในแกลเลอรี่ ==========
    function startGalleryFloatingEffect() {
      // หยุดเอฟเฟกต์เก่าก่อน (ถ้ามี)
      if (galleryFloatingInterval) {
        clearInterval(galleryFloatingInterval);
      }
      
      const floatingEmojis = ['🎈', '💖', '🌸', '🌷', '💐', '🌺', '🌻'];
      
      galleryFloatingInterval = setInterval(() => {
        const emoji = floatingEmojis[Math.floor(Math.random() * floatingEmojis.length)];
        const deco = document.createElement('div');
        deco.className = 'gallery-floating-decor';
        deco.textContent = emoji;
        
        // ตำแหน่งเริ่มต้นสุ่ม
        deco.style.left = Math.random() * 100 + 'vw';
        
        // Drift ซ้าย-ขวา
        const driftX = (Math.random() - 0.5) * 200;
        deco.style.setProperty('--drift-x', driftX + 'px');
        
        // หมุน
        const rotateEnd = Math.random() * 720 - 360;
        deco.style.setProperty('--rotate-end', rotateEnd + 'deg');
        
        // ระยะเวลาตก
        const duration = 8 + Math.random() * 4;
        deco.style.animationDuration = duration + 's';
        
        document.body.appendChild(deco);
        
        // ลบออกเมื่อหมด
        setTimeout(() => {
          deco.remove();
        }, duration * 1000);
      }, 1200); // สร้างทุก 1.2 วินาที
    }
    
    // ✅ ฟังก์ชันหยุดและลบเอฟเฟกต์ลอย
    function stopGalleryFloatingEffect() {
      // หยุด interval
      if (galleryFloatingInterval) {
        clearInterval(galleryFloatingInterval);
        galleryFloatingInterval = null;
      }
      
      // ลบ element ทั้งหมดที่ลอยอยู่
      const floatingElements = document.querySelectorAll('.gallery-floating-decor');
      floatingElements.forEach(el => el.remove());
    }
    
    // ==================== SURPRISE ====================
    function showSurpriseHint() {
      document.querySelector('.surprise-text').style.opacity = '1';
    }
    
    function hideSurpriseHint() {
      document.querySelector('.surprise-text').style.opacity = '0';
    }

    function triggerSurprise() {
    showSurpriseMessage();
    }

    
    function showSurpriseMessage() {
      const msg = surpriseMessages[Math.floor(Math.random() * surpriseMessages.length)];
      
      // สร้าง heart effect ตอนกด
      const heart = document.createElement('div');
      heart.className = 'click-heart-effect';
      heart.textContent = '💖';
      heart.style.left = '50%';
      heart.style.top = '50%';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 800);
      
      // สร้างข้อความแบบมีกรอบ popup
      setTimeout(() => {
        const msgBox = document.createElement('div');
        msgBox.className = 'surprise-message-box';
        msgBox.textContent = msg;
        
        // สุ่มตำแหน่ง (แต่ให้อยู่ในพื้นที่ที่มองเห็นได้)
        const positions = [
          { top: '30%', left: '50%' },
          { top: '50%', left: '30%' },
          { top: '50%', left: '70%' },
          { top: '60%', left: '50%' },
          { top: '40%', left: '35%' },
          { top: '40%', left: '65%' }
        ];
        const pos = positions[Math.floor(Math.random() * positions.length)];
        msgBox.style.top = pos.top;
        msgBox.style.left = pos.left;
        msgBox.style.transform = 'translate(-50%, -50%) scale(0.3)';
        
        document.body.appendChild(msgBox);
        setTimeout(() => msgBox.remove(), 1800);
      }, 300);
    }
    
    function runAwayValentineNo() {
      const noBtn = document.getElementById('valentine-no-btn');
      const x = Math.random() * (window.innerWidth - 200);
      const y = Math.random() * (window.innerHeight - 200);
      noBtn.style.position = 'absolute';
      noBtn.style.left = x + 'px';
      noBtn.style.top = y + 'px';
    }
    
    // ==================== SURPRISE MODAL ====================
    function showSurpriseModal() {
      document.getElementById('surprise-modal').classList.add('active');
    }
    
    function closeSurpriseModal(isYes) {
      document.getElementById('surprise-modal').classList.remove('active');
    }
    
    function runAwayNoButton() {
      const noBtn = document.getElementById('modal-no-btn');
      const x = Math.random() * (window.innerWidth - 200) - 100;
      const y = Math.random() * (window.innerHeight - 200) - 100;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    }
    
    // ==================== IMPROVED GAME - FRUIT NINJA STYLE ====================
    let gameScore = 0;
    let gameActive = false;
    let spawnInterval = null;
    
    const gameObjects = [
      { emoji: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91253-removebg-preview.png', points: 5, rate: 0.3, color: '#ff69b4' },
      { emoji: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91254-removebg-preview.png', points: 3, rate: 0.3, color: '#f5b3d4' },
      { emoji: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/91255-removebg-preview.png', points: 2, rate: 0.2, color: '#ffb3d9' },
      { emoji: 'https://raw.githubusercontent.com/adipongthanabodipaiboon-png/song-valentine-s-day/main/9xxx-removebg-preview.png', points: -4, rate: 0.15, color: '#999' }
    ];
    
    function startGame() {
      gameScore = 0;
      gameActive = true;
      document.getElementById('game-overlay').style.display = 'none';
      document.getElementById('game-score').textContent = '0';
      
      // Clear any existing objects
      const gameArea = document.getElementById('game-area');
      const existingObjects = gameArea.querySelectorAll('.game-object');
      existingObjects.forEach(obj => obj.remove());
      
      // Spawn objects every 1 second
      spawnInterval = setInterval(() => {
        if (gameActive) spawnGameObject();
      }, 1000);
      
      // Game duration: 50 seconds
      setTimeout(() => {
        if (gameActive && gameScore < 99) {
          gameActive = false;
          if (spawnInterval) clearInterval(spawnInterval);
          showGameOver();
        }
      }, 50000);
    }
    
    function spawnGameObject() {
      if (!gameActive) return;
      
      const obj = gameObjects[Math.floor(Math.random() * gameObjects.length)];
      const gameArea = document.getElementById('game-area');
      const el = document.createElement('div');
      el.className = 'game-object';
      el.innerHTML = `<img src="${obj.emoji}" class="falling-img" style="width:90px;height:90px;object-fit:contain;pointer-events:none;display:block;">`;
      
      // Random horizontal position (10-90%)
      const startX = 10 + Math.random() * 80;
      el.style.left = startX + '%';
      el.style.bottom = '-60px';
      
      // Jump arc - Fruit Ninja style (jumps UP then falls)
      const jumpHeight = -(380 + Math.random() * 180); // Jump 380-560px up
      const rotation = (Math.random() - 0.5) * 1440; // More dramatic rotation
      const duration = 2.2 + Math.random() * 0.8; // 2.2-3 seconds
      
      el.style.setProperty('--jump-height', jumpHeight + 'px');
      el.style.setProperty('--rotation', rotation + 'deg');
      el.style.animation = `objectJump ${duration}s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards`;
      
      // Store object data for click handler
      el.dataset.points = obj.points;
      el.dataset.color = obj.color;
      
      el.onclick = (e) => {
        e.stopPropagation();
        if (!gameActive || el.dataset.clicked) return;
        el.dataset.clicked = 'true';
        
        // Update score
        const points = parseInt(el.dataset.points);
        gameScore += points;
        document.getElementById('game-score').textContent = gameScore;
        
        // Beautiful click effects
        createClickEffect(e.clientX, e.clientY, points, el.dataset.color);
        
        // Remove object with explosion
        el.style.transform = 'scale(0) rotate(720deg)';
        el.style.opacity = '0';
        el.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
        setTimeout(() => el.remove(), 400);
        
        // Check for WIN at 99 points
        if (gameScore >= 99 && gameActive) {
          gameActive = false;
          if (spawnInterval) clearInterval(spawnInterval);
          setTimeout(() => winGame(), 800);
        }
      };
      
      gameArea.appendChild(el);
      
      // Auto-remove if not clicked
      setTimeout(() => {
        if (el.parentNode && !el.dataset.clicked) {
          el.remove();
        }
      }, duration * 1000 + 200);
    }
    
    function createClickEffect(x, y, points, color) {
      const gameArea = document.getElementById('game-area');
      const rect = gameArea.getBoundingClientRect();
      const localX = x - rect.left;
      const localY = y - rect.top;
      
      // Main explosion ring
      const effect = document.createElement('div');
      effect.className = 'click-effect';
      effect.style.left = (localX - 50) + 'px';
      effect.style.top = (localY - 50) + 'px';
      effect.style.borderColor = color;
      gameArea.appendChild(effect);
      setTimeout(() => effect.remove(), 700);
      
      // Score popup with enhanced styling
      const popup = document.createElement('div');
      popup.className = 'score-popup';
      popup.textContent = (points > 0 ? '+' : '') + points;
      popup.style.left = localX + 'px';
      popup.style.top = (localY - 60) + 'px';
      popup.style.color = points > 0 ? color : '#666';
      gameArea.appendChild(popup);
      setTimeout(() => popup.remove(), 1200);
      
      // Particle burst (8 particles)
      const particles = ['✨', '💫', '⭐', '🌟'];
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.className = 'hit-particle';
          particle.textContent = particles[Math.floor(Math.random() * particles.length)];
          particle.style.left = localX + 'px';
          particle.style.top = localY + 'px';
          const angle = (Math.PI * 2 * i) / 8;
          const distance = 70 + Math.random() * 40;
          const tx = Math.cos(angle) * distance;
          const ty = Math.sin(angle) * distance;
          const rotation = Math.random() * 720 - 360;
          particle.style.setProperty('--tx', tx + 'px');
          particle.style.setProperty('--ty', ty + 'px');
          particle.style.setProperty('--rotation', rotation + 'deg');
          particle.style.animation = 'particleBurst 1s ease-out forwards';
          gameArea.appendChild(particle);
          setTimeout(() => particle.remove(), 1000);
        }, i * 40);
      }
      
      // Extra sparkles for positive scores
      if (points > 0) {
        for (let i = 0; i < 3; i++) {
          setTimeout(() => {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'absolute';
            sparkle.style.left = (localX + (Math.random() - 0.5) * 60) + 'px';
            sparkle.style.top = (localY + (Math.random() - 0.5) * 60) + 'px';
            sparkle.textContent = '✨';
            sparkle.style.fontSize = '1.8rem';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.opacity = '0';
            sparkle.style.animation = 'sparkleRise 1.5s ease-out forwards';
            gameArea.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 1500);
          }, i * 150);
        }
      }
    }
    
    // ========== ✅ ปรับปรุง Game Over - แยกปุ่มตามผลลัพธ์ ==========
    function showGameOver() {
      const overlay = document.getElementById('game-overlay');
      overlay.style.display = 'flex';
      
      // ถ้าคะแนนน้อยกว่า 99 = แสดงปุ่ม "เล่นใหม่"
      overlay.innerHTML = `
        <p class="overlay-text" style="font-size: 2rem;">⏰ Time's Up!</p>
        <p class="overlay-subtext" style="font-size: 1.2rem; margin-top: 20px;">
          You scored <span style="color: #c2185b; font-size: 2.5rem; font-weight: 700;">${gameScore}</span> points!<br>
          Try again to reach 99! 💪
        </p>
        <button class="unlock-btn" onclick="startGame()" style="background: linear-gradient(135deg, #f5b3d4, #e895b8); color: #fff; margin-top: 30px;">
          🔄 PLAY AGAIN
        </button>
      `;
    }
    
    function winGame() {
      // Show mega celebration
      triggerMegaCelebration();
      
      // Update game overlay after celebration starts
      setTimeout(() => {
        const overlay = document.getElementById('game-overlay');
        overlay.style.display = 'flex';
        overlay.style.background = 'rgba(255, 255, 255, 0.95)';
        
        // ถ้าชนะ (99 คะแนน) = แสดงปุ่ม "กลับหน้าหลัก"
        overlay.innerHTML = `
          <div style="position: relative; z-index: 10; text-align: center;">
            <p class="overlay-text" style="font-size: 3rem; margin-bottom: 30px; background: linear-gradient(135deg, #c2185b, #f5b3d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
              🎉 INCREDIBLE! 🎉
            </p>
            <p style="font-size: 1.8rem; color: #c2185b; font-weight: 700; margin-bottom: 20px;">
              You reached <span style="font-size: 3.5rem; background: linear-gradient(135deg, #ff1493, #f5b3d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">99</span> points!
            </p>
            <p class="overlay-subtext" style="font-size: 1.3rem; line-height: 2; color: #3d2e35;">
              Out of everyone in this world…<br>
              my heart chose <span style="color: #c2185b; font-weight: 700; font-size: 1.5rem;">YOU</span>, Blue. 💕<br><br>
              <span style="font-size: 1rem; color: #f5b3d4;">You're absolutely amazing! ✨</span>
            </p>
            <button class="unlock-btn" onclick="navigateTo('menu')" style="background: linear-gradient(135deg, #f5b3d4, #e895b8); color: #fff; margin-top: 40px;">
              ← BACK TO HOME
            </button>
          </div>
        `;
      }, 2500);
    }
    
    function triggerMegaCelebration() {
      // Mega celebration overlay
      const celebOverlay = document.createElement('div');
      celebOverlay.className = 'mega-celebration-overlay';
      document.body.appendChild(celebOverlay);
      setTimeout(() => celebOverlay.remove(), 10000);
      
      // Win message
      const winMsg = document.createElement('div');
      winMsg.className = 'win-message';
      winMsg.innerHTML = '🌟 YOU WIN! 🌟<br><span style="font-size: 2rem;">99 POINTS!</span>';
      document.body.appendChild(winMsg);
      setTimeout(() => winMsg.remove(), 3000);
      
      // HEARTS EXPLOSION (40 hearts)
      for (let i = 0; i < 40; i++) {
        setTimeout(() => {
          const heart = document.createElement('div');
          heart.className = 'celebration-heart';
          const hearts = ['💕', '💖', '💗', '💝', '💓', '💞', '💟', '❤️'];
          heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
          heart.style.left = '50%';
          heart.style.top = '50%';
          const angle = (Math.PI * 2 * i) / 40 + (Math.random() * 0.3);
          const distance = 180 + Math.random() * 350;
          const tx = Math.cos(angle) * distance;
          const ty = Math.sin(angle) * distance;
          const rotation = Math.random() * 1080 - 540;
          heart.style.setProperty('--tx', tx + 'px');
          heart.style.setProperty('--ty', ty + 'px');
          heart.style.setProperty('--rotation', rotation + 'deg');
          document.body.appendChild(heart);
          setTimeout(() => heart.remove(), 3000);
        }, i * 40);
      }
      
      // FLOWERS BURST (50 flowers)
      const flowers = ['🌹', '🌺', '🌸', '🌼', '🌻', '💐', '🏵️', '🌷', '🥀'];
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const flower = document.createElement('div');
          flower.className = 'celebration-flower';
          flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
          flower.style.left = Math.random() * 100 + '%';
          flower.style.top = Math.random() * 100 + '%';
          const tx = (Math.random() - 0.5) * 300;
          const ty = (Math.random() - 0.5) * 300;
          flower.style.setProperty('--tx', tx + 'px');
          flower.style.setProperty('--ty', ty + 'px');
          document.body.appendChild(flower);
          setTimeout(() => flower.remove(), 2500);
        }, i * 50);
      }
      
      // BALLOONS FLOATING UP (25 balloons)
      for (let i = 0; i < 25; i++) {
        setTimeout(() => {
          const balloon = document.createElement('div');
          balloon.className = 'celebration-balloon';
          balloon.textContent = '🎈';
          balloon.style.left = (5 + Math.random() * 90) + '%';
          balloon.style.bottom = '-80px';
          const drift = (Math.random() - 0.5) * 250;
          const rotation = (Math.random() - 0.5) * 360;
          balloon.style.setProperty('--drift', drift + 'px');
          balloon.style.setProperty('--rotation', rotation + 'deg');
          document.body.appendChild(balloon);
          setTimeout(() => balloon.remove(), 5000);
        }, i * 120);
      }
      
      // SPARKLES RISING (30 sparkles)
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const sparkle = document.createElement('div');
          sparkle.className = 'celebration-sparkle';
          sparkle.textContent = ['✨', '💫', '⭐', '🌟'][Math.floor(Math.random() * 4)];
          sparkle.style.left = Math.random() * 100 + '%';
          sparkle.style.bottom = '0';
          document.body.appendChild(sparkle);
          setTimeout(() => sparkle.remove(), 3000);
        }, i * 100);
      }
      
      // Fireworks and confetti
      triggerFireworks();
      setTimeout(() => triggerFireworks(), 1500);
      setTimeout(() => triggerFireworks(), 3000);
      triggerConfetti();
      setTimeout(() => triggerConfetti(), 1200);
      setTimeout(() => triggerConfetti(), 2400);
    }
    
    // ==================== VALENTINE PAGE ====================
    function sayYes() {
      function openSecret(){
        document.getElementById('secret-page').style.display = 'flex';
    }
      document.getElementById('valentine-modal').classList.remove('active');
      triggerCelebration();
      setTimeout(() => {
        navigateTo('final');
        triggerFinalCelebration();
      }, 1500);
    }
    
    // ==================== CELEBRATIONS ====================
    function triggerCelebration() {
      triggerFireworks();
      triggerConfetti();
    }
    
    function triggerFinalCelebration() {
      triggerFireworks();
      triggerConfetti();
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const rose = document.createElement('div');
          rose.className = 'rose-bloom';
          rose.textContent = '🌹';
          rose.style.left = Math.random() * 100 + '%';
          rose.style.top = Math.random() * 100 + '%';
          document.getElementById('final-effects').appendChild(rose);
        }, i * 150);
      }
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.className = 'particle pink-particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          document.getElementById('final-effects').appendChild(particle);
        }, i * 100);
      }
    }
    
    function triggerFireworks() {
      const colors = ['#f5b3d4', '#e895b8', '#ff69b4', '#ffb3d9', '#e8d4a0'];
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const fw = document.createElement('div');
          fw.className = 'firework';
          fw.style.left = (10 + Math.random() * 80) + '%';
          fw.style.top = (10 + Math.random() * 60) + '%';
          fw.style.background = colors[Math.floor(Math.random() * colors.length)];
          const angle = Math.random() * Math.PI * 2;
          const distance = 100 + Math.random() * 200;
          const tx = Math.cos(angle) * distance;
          const ty = Math.sin(angle) * distance;
          fw.style.setProperty('--tx', tx + 'px');
          fw.style.setProperty('--ty', ty + 'px');
          document.body.appendChild(fw);
          setTimeout(() => fw.remove(), 1200);
        }, i * 80);
      }
    }
    
    function triggerConfetti() {
      const colors = ['#f5b3d4', '#e895b8', '#ff69b4', '#ffb3d9', '#e8d4a0'];
      for (let i = 0; i < 60; i++) {
        setTimeout(() => {
          const conf = document.createElement('div');
          conf.className = 'confetti-piece';
          conf.style.left = Math.random() * 100 + '%';
          conf.style.top = '-10px';
          conf.style.background = colors[Math.floor(Math.random() * colors.length)];
          conf.style.width = (4 + Math.random() * 8) + 'px';
          conf.style.height = (4 + Math.random() * 8) + 'px';
          conf.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
          conf.style.animation = `confettiDrop 3s ease forwards`;
          document.body.appendChild(conf);
          setTimeout(() => conf.remove(), 3000);
        }, i * 40);
      }
    }
    
    // ==================== MUSIC ====================
    let musicPlaying = false;
    
    function playMusic() {
      const audio = document.getElementById('bg-music');
      audio.volume = 0.3;
      audio.play().catch(() => console.log('Audio autoplay blocked'));
      musicPlaying = true;
      document.getElementById('music-toggle').textContent = '🔊';
    }
    
    function toggleMusic() {
      const audio = document.getElementById('bg-music');
      if (musicPlaying) {
        audio.pause();
        musicPlaying = false;
        document.getElementById('music-toggle').textContent = '🔇';
      } else {
        audio.play();
        musicPlaying = true;
        document.getElementById('music-toggle').textContent = '🔊';
      }
    }
    
    // ==================== INITIALIZE ====================
    window.addEventListener('load', () => {
      setTimeout(initializeApp, 100);
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cbce6f40401271d',t:'MTc3MDc0MDA5NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>